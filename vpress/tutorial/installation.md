# 安装教程

## 系统要求

系统支持: CentOS 7+/Ubuntu 18+/Debian 10+

处理器架构: `linux/386` `linux/amd64` `liunx/v6` `linux/v7` `linux/arm64` `linux/ppc64le` `linux/s390x`

内存要求: ≥1G

## 安装前准备

1. 一台未被墙的**国外VPS**
2. 一个解析到VPS的**二级域名**
3. 开放端口

| 端口   | 描述             |
|------|----------------|
| 80   | 伪装Web          |
| 8863 | Caddy转发        |
| 8888 | Trojan Panel前端 |
| 3306 | MariaDB        |
| 6379 | Redis          |
| 8100 | gRPC端口         |

Trojan Panel需开放以下端口: `80` `8863` `8888`，Trojan Panel Core服务器需要开放：`8100`。

如果使用的服务器控制面板有防火墙设置需要自己在控制面板自行开放以上端口。

## 安装建议

1. 控制面板和节点都推荐部署在**国外服务器**上，否则会由于网络问题使用一键安装脚本会因为远程下载文件超时报错。

2. 建议的安装顺序: 卸载云盾(阿里云服务器) > 安装BBRplus > 安装Trojan Panel > 安装Trojan Panel Core

   建议在脚本运行中需要手动输入的部分，如果没有特殊需求或者不知道这个选项是干什么的，除数据库密码和Redis密码自定义以外，其他默认即可。

## 一键安装脚本

```shell
source <(curl -L https://github.com/trojanpanel/install-script/raw/main/install_script.sh)
```

## 安装Trojan Panel

1. 请输入Caddy的转发端口(用于申请证书,默认:8863)

   默认即可，除非8863端口被墙。

2. 请输入你的域名(必填)

   输入你提前解析到本机的域名。

3. 请选择设置证书的方式?(1/自动申请和续签证书 2/手动设置证书路径 默认:1/自动申请和续签证书)

   推荐自动申请和续签证书，如果自己有证书或者自动申请和续签证书失败可以选择手动设置证书路径。

4. 请输入你的邮箱(用于申请证书,默认:`123456@qq.com`)

   默认即可，或输入一个合法的邮箱地址，此选项用于申请证书。

5. 请输入证书的.crt文件路径(必填)

   使用.crt文件的绝对路径，例如：`/root/www.google.com.crt`

6. 请输入证书的.key文件路径(必填)

   使用.key文件的绝对路径，例如：`/root/www.google.com.key`

7. 请输入数据库的用户名(默认:root)

   默认即可，除非有自定义数据库用户的需求。

8. 请输入数据库的密码(必填)

   输入一个较为复杂且你能记得住的密码。

9. 请输入Redis的密码(必填)

输入一个较为复杂且你能记得住的密码。

10. 请输入数据库的IP地址(默认:本地数据库)

如果数据库安装在本机则默认即可，如果数据库安装在其他服务器这里填远程服务器的IP地址。

11. 请输入数据库的端口(默认:本地数据库端口)

如果数据库安装在本机则默认即可，如果数据库安装在其他服务器这里填远程服务器的数据库端口。

12. 请输入数据库的用户名(默认:root)

默认即可，除非有自定义数据库用户的需求。

13. 请输入数据库的密码(必填)

如果数据库安装在本机则填写本机数据库密码，如果数据库安装在其他服务器这里填远程服务器的数据库密码。

14. 请输入Redis的IP地址(默认:本机Redis)

如果Redis安装在本机则默认即可，如果Redis安装在其他服务器这里填远程服务器的IP地址。

15. 请输入Redis的端口(默认:本机Redis端口)

如果Redis安装在本机则默认即可，如果Redis安装在其他服务器这里填远程服务器的Redis端口。

16. 请输入Redis的密码(必填)

如果Redis安装在本机则填写本机Redis密码，如果Redis安装在其他服务器这里填远程服务器的Redis密码。

17. 请输入Trojan Panel前端端口(默认:8888)

默认即可，除非有自定义Trojan Panel前端端口的需求。

**提示**

1. 安装结束后，访问**你的域名**如果是一个静态网页，说明已经安装成功。

2. 安装成功后，Trojan Panel管理面板地址: `你的域名:8888`
   系统管理员 默认用户名: `sysadmin` 默认密码: `123456` 请及时登陆管理面板修改密码。

## 安装Trojan Panel Core

1. 请输入数据库的IP地址(默认:本地数据库)

如果数据库安装在本机则默认即可，如果数据库安装在其他服务器这里填远程服务器的IP地址。

2. 请输入数据库的端口(默认:本地数据库端口)

如果数据库安装在本机则默认即可，如果数据库安装在其他服务器这里填远程服务器的数据库端口。

3. 请输入数据库的用户名(默认:root)

默认即可，除非有自定义数据库用户的需求。

4. 请输入数据库的密码(必填)

如果数据库安装在本机则填写本机数据库密码，如果数据库安装在其他服务器这里填远程服务器的数据库密码。

5. 请输入数据库名称(默认:trojan_panel_db)

默认即可，除非有自定义数据库名称的需求。

6. 请输入数据库的用户表名称(默认:account)

默认即可，除非有自定义数据库的用户表的需求。

7. 请输入Redis的IP地址(默认:本机Redis)

如果Redis安装在本机则默认即可，如果Redis安装在其他服务器这里填远程服务器的IP地址。

8. 请输入Redis的端口(默认:本机Redis端口)

如果Redis安装在本机则默认即可，如果Redis安装在其他服务器这里填远程服务器的Redis端口。

9. 请输入Redis的密码(必填)

如果Redis安装在本机则填写本机Redis密码，如果Redis安装在其他服务器这里填远程服务器的Redis密码。